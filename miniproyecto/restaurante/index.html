



<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copiar al portapapeles">
      
        <meta name="lang:clipboard.copied" content="Copiado al portapapeles">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No se encontraron documentos">
      
        <meta name="lang:search.result.one" content="1 documento encontrado">
      
        <meta name="lang:search.result.other" content="# documentos encontrados">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Enunciado - PDDM-iOS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#009688">
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#miniproyecto-app-restaurante" tabindex="1" class="md-skip">
        Saltar a contenido
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="PDDM-iOS" class="md-header-nav__button md-logo">
          
            <img src="../../logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              PDDM-iOS
            </span>
            <span class="md-header-nav__topic">
              
                Enunciado
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Teclee para comenzar búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="PDDM-iOS" class="md-nav__button md-logo">
      
        <img src="../../logo.png" width="48" height="48">
      
    </a>
    PDDM-iOS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Persistencia básica
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Persistencia básica
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap1/1.1_sistema_de_archivos/" title="Sistema de archivos" class="md-nav__link">
      Sistema de archivos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap1/1.2_serializacion/" title="Serialización" class="md-nav__link">
      Serialización
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap1/1.3_property_lists/" title="Property lists" class="md-nav__link">
      Property lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap1/1.4_preferencias/" title="Preferencias" class="md-nav__link">
      Preferencias
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap1/1.5_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      SQLite
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        SQLite
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap2/2.1_intro_SQLite/" title="Introducción" class="md-nav__link">
      Introducción
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap2/2.2_API_SQLite/" title="El API de SQLIte" class="md-nav__link">
      El API de SQLIte
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap2/2.3_frameworks/" title="Frameworks para SQLite" class="md-nav__link">
      Frameworks para SQLite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap2/2.4_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      ¡Hola Core Data!. Una aplicación de ejemplo
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        ¡Hola Core Data!. Una aplicación de ejemplo
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap3/3.1_intro/" title="Introducción a Core Data" class="md-nav__link">
      Introducción a Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap3/3.2_stack/" title="Crear el stack de Core Data en iOS" class="md-nav__link">
      Crear el stack de Core Data en iOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap3/3.3_entidades/" title="Las entidades. Almacenar datos" class="md-nav__link">
      Las entidades. Almacenar datos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap3/3.4_recuperar_datos/" title="Recuperar los datos" class="md-nav__link">
      Recuperar los datos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap3/apendice_ver_almacenamiento/" title="Apéndice. Cómo examinar el almacenamiento persistente" class="md-nav__link">
      Apéndice. Cómo examinar el almacenamiento persistente
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Modelos de datos en Core Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Modelos de datos en Core Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.1_crear_modelo/" title="Crear y editar modelos" class="md-nav__link">
      Crear y editar modelos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.2_clases_propias/" title="Modelar las entidades en código Swift" class="md-nav__link">
      Modelar las entidades en código Swift
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.3_CRUD/" title="CRUD en Core Data" class="md-nav__link">
      CRUD en Core Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.4_validaciones/" title="Validaciones" class="md-nav__link">
      Validaciones
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.5_transformables/" title="Transformables" class="md-nav__link">
      Transformables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap4/4.6_ejercicios/" title="Ejercicios de modelos de datos" class="md-nav__link">
      Ejercicios de modelos de datos
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Búsquedas en Core Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Búsquedas en Core Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap6/1_predicados/" title="Predicados" class="md-nav__link">
      Predicados
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap6/2_ordenacion/" title="Ordenación" class="md-nav__link">
      Ordenación
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap6/3_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Tablas en Core Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Tablas en Core Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/1_el_frc/" title="El *fetched results controller*" class="md-nav__link">
      El *fetched results controller*
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/2_configuracion_basica/" title="Inicializar el "fetched results controller"" class="md-nav__link">
      Inicializar el "fetched results controller"
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/3_tabla/" title="Mostrar los datos en la tabla" class="md-nav__link">
      Mostrar los datos en la tabla
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/4_refrescar_tabla/" title="Refrescar la tabla" class="md-nav__link">
      Refrescar la tabla
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/5_secciones/" title="Secciones de tabla automáticas" class="md-nav__link">
      Secciones de tabla automáticas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap7/6_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Migraciones de datos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Migraciones de datos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap8/1_intro/" title="Qué son las migraciones de datos" class="md-nav__link">
      Qué son las migraciones de datos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap8/2_versiones/" title="Versiones del modelo de datos" class="md-nav__link">
      Versiones del modelo de datos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap8/3_migraciones_ligeras/" title="Migraciones ligeras" class="md-nav__link">
      Migraciones ligeras
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap8/4_migraciones_pesadas/" title="Migraciones pesadas" class="md-nav__link">
      Migraciones pesadas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap8/apendice_migraciones_ios9/" title="Apéndice. migraciones en versiones antiguas de iOS" class="md-nav__link">
      Apéndice. migraciones en versiones antiguas de iOS
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Concurrencia. Contextos múltiples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Concurrencia. Contextos múltiples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap9/1_background/" title="Múltiples contextos para trabajos en *background*" class="md-nav__link">
      Múltiples contextos para trabajos en *background*
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap9/2_comunicacion/" title="Comunicación entre contextos" class="md-nav__link">
      Comunicación entre contextos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap9/3_contextos_anidados/" title="Contextos anidados" class="md-nav__link">
      Contextos anidados
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap9/4_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      Miniproyecto
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Miniproyecto
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Enunciado
      </label>
    
    <a href="./" title="Enunciado" class="md-nav__link md-nav__link--active">
      Enunciado
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#el-modelo-de-datos-inicial-05-puntos" class="md-nav__link">
    El modelo de datos inicial (0.5 puntos)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-carta-3-puntos" class="md-nav__link">
    La Carta (3 puntos)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inicializar-los-datos" class="md-nav__link">
    Inicializar los datos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#la-pantalla-de-carta-platosviewcontroller" class="md-nav__link">
    La pantalla de Carta (PlatosViewController)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-pedido-actual-pedidoactualviewcontroller-3-puntos" class="md-nav__link">
    El pedido actual (PedidoActualViewController) (3 puntos)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-el-plato-elegido-al-pedido" class="md-nav__link">
    Añadir el plato elegido al pedido
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cambiar-la-cantidad-de-un-plato" class="md-nav__link">
    Cambiar la cantidad de un plato
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#realizar-y-cancelar-pedido" class="md-nav__link">
    Realizar y cancelar pedido
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tu-historial-pedidosviewcontroller-hasta-4-puntos" class="md-nav__link">
    Tu historial (PedidosViewController) (hasta 4 puntos)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apendice-el-modelo-de-datos-completo" class="md-nav__link">
    Apéndice: el modelo de datos completo
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Persistencia como servicio
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Persistencia como servicio
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap11/1_introduccion_BAAS/" title="Backend as a Service" class="md-nav__link">
      Backend as a Service
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap11/2_gestion_usuarios/" title="Gestión de usuarios en Firebase" class="md-nav__link">
      Gestión de usuarios en Firebase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap11/3_persistencia/" title="Persistencia en Firebase" class="md-nav__link">
      Persistencia en Firebase
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap11/4_ejercicios/" title="Ejercicios" class="md-nav__link">
      Ejercicios
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Arquitecturas de aplicaciones en iOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Arquitecturas de aplicaciones en iOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/intro/" title="Introducción" class="md-nav__link">
      Introducción
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/2_MVC/" title="Model/View/Controller" class="md-nav__link">
      Model/View/Controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/3_MVP/" title="Model/View/Presenter" class="md-nav__link">
      Model/View/Presenter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/4_MVVM/" title="Model/View/ViewModel" class="md-nav__link">
      Model/View/ViewModel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/5_VIPER/" title="VIPER" class="md-nav__link">
      VIPER
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/6_ejercicios/" title="Ejercicios MVVM" class="md-nav__link">
      Ejercicios MVVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cap10/6_ejercicios_redux/" title="Ejercicios Redux" class="md-nav__link">
      Ejercicios Redux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Tabla de contenidos</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#el-modelo-de-datos-inicial-05-puntos" class="md-nav__link">
    El modelo de datos inicial (0.5 puntos)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#la-carta-3-puntos" class="md-nav__link">
    La Carta (3 puntos)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inicializar-los-datos" class="md-nav__link">
    Inicializar los datos
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#la-pantalla-de-carta-platosviewcontroller" class="md-nav__link">
    La pantalla de Carta (PlatosViewController)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#el-pedido-actual-pedidoactualviewcontroller-3-puntos" class="md-nav__link">
    El pedido actual (PedidoActualViewController) (3 puntos)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#anadir-el-plato-elegido-al-pedido" class="md-nav__link">
    Añadir el plato elegido al pedido
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cambiar-la-cantidad-de-un-plato" class="md-nav__link">
    Cambiar la cantidad de un plato
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#realizar-y-cancelar-pedido" class="md-nav__link">
    Realizar y cancelar pedido
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tu-historial-pedidosviewcontroller-hasta-4-puntos" class="md-nav__link">
    Tu historial (PedidosViewController) (hasta 4 puntos)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apendice-el-modelo-de-datos-completo" class="md-nav__link">
    Apéndice: el modelo de datos completo
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="miniproyecto-app-restaurante">Miniproyecto: <em>app</em> restaurante<a class="headerlink" href="#miniproyecto-app-restaurante" title="Permanent link">&para;</a></h1>
<p>El objetivo es desarrollar una pequeña aplicación para gestionar pedidos <em>online</em> a un restaurante. Para ello almacenaremos los datos de la carta y de los pedidos realizados por el usuario en Core Data.</p>
<p>Descárgate la plantilla de la aplicación desde moodle, aquí está ya implementada la mayor parte de la interfaz.</p>
<h2 id="el-modelo-de-datos-inicial-05-puntos">El modelo de datos inicial (0.5 puntos)<a class="headerlink" href="#el-modelo-de-datos-inicial-05-puntos" title="Permanent link">&para;</a></h2>
<p>Nuestro modelo de datos debe tener tres entidades, <code>Plato</code>, <code>Pedido</code> y <code>LineaPedido</code>. Esta última es la que relaciona los platos con los pedidos,  guardando cuántas unidades de un plato se han incluido en un pedido. </p>
<p><strong>Para simplificar, en una primera iteración, puedes crear solo la entidad <code>Plato</code></strong>, solo con sus propiedades, sin relaciones. Más tarde puedes encargarte del resto (puedes ver el modelo completo en el apéndice del enunciado).</p>
<ul>
<li><code>Plato</code>:<ul>
<li>Propiedades:<ul>
<li><code>nombre</code> de tipo <code>String</code></li>
<li><code>descripcion</code> de tipo <code>String</code></li>
<li><code>precio</code> de tipo <code>Double</code></li>
<li><code>tipo</code> de tipo <code>String</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Se deberían usar tipos <code>Decimal</code> en los precios para evitar errores de redondeo, pero usaremos <code>Double</code> por simplicidad. Además, el tipo del plato debería ser un enumerado, pero estos no se pueden almacenar directamente en Core Data. Tendríamos que generar manualmente el código de las entidades para poder representar los datos externamente como enums e internamente como otro tipo.</p>
</blockquote>
<h2 id="la-carta-3-puntos">La Carta (3 puntos)<a class="headerlink" href="#la-carta-3-puntos" title="Permanent link">&para;</a></h2>
<p>Esta parte de la <em>app</em> es la que muestra los platos y nos permite añadirlos al pedido.</p>
<h3 id="inicializar-los-datos">Inicializar los datos<a class="headerlink" href="#inicializar-los-datos" title="Permanent link">&para;</a></h3>
<p>Los datos de los platos del restaurante están en un archivo <code>platos.json</code>.  En el <code>AppDelegate</code> hay una función <code>importPlatos</code> que lee el JSON, lo almacena en un array de <code>structs</code> con los datos correspondientes, y pone una preferencia de usuario llamada <code>platosImportados</code> a <code>true</code>. El JSON solo se lee si la preferencia está a <code>false</code> (valor por defecto)</p>
<p><strong>Añade código Swift que copie los datos de los structs a entidades <code>Plato</code> y guarde el contexto de persistencia para hacer efectivos los cambios</strong>.</p>
<blockquote>
<p>Para forzar el borrado de la base de datos o las preferencias puedes usar la aplicación <code>SimSim</code> para borrar el almacenamiento de la app <code>Restaurante</code> en el simulador (selecciona la app y luego la opción <code>Finder</code> para abrir la carpeta). La base de datos de SQLite se almacena en <code>Library/Application Support</code> y las preferencias de usuario en <code>Library/Preferences</code></p>
</blockquote>
<h3 id="la-pantalla-de-carta-platosviewcontroller">La pantalla de Carta (<code>PlatosViewController</code>)<a class="headerlink" href="#la-pantalla-de-carta-platosviewcontroller" title="Permanent link">&para;</a></h3>
<p>En esta pantalla se deben mostrar los datos de los platos. Está controlada por el <code>PlatosViewController</code>. Iremos primero con que salgan los platos listados y luego con la funcionalidad del botón de "Añadir" al pedido.</p>
<h4>Listado de platos</h4>
<ul>
<li>
<p>Usa un <code>NSFetchedResultsController</code> para <strong>listar los platos</strong> en la tabla. Haz que los platos se agrupen en secciones según su tipo.</p>
<ul>
<li>Las celdas de la tabla son de la clase <code>PlatoTableViewCell</code>, aquí ya están definidos los <em>outlets</em> para poder rellenar los datos.</li>
</ul>
</li>
<li>
<p>Implementa una <strong>búsqueda/filtrado de platos</strong> como hiciste en la aplicación de notas, que busque texto en el nombre o en la descripción del plato. Para aplicar el "filtro" puedes:</p>
<ul>
<li>Crear un predicado (<code>NSPredicate</code>) con la condición de búsqueda y asignárselo a la propiedad <code>fetchRequest.predicate</code> del <code>NSFetchedResultsController</code>. </li>
<li>Para que se actualicen los datos tendrás que hacer un <code>performFetch</code> del <code>NSFetchedResultsController</code></li>
</ul>
</li>
</ul>
<h4>Añadir al pedido actual</h4>
<p>Las celdas de la tabla usan el patrón <em>delegate</em> para avisar de que se ha pulsado el botón "Añadir". Cada celda almacena su <code>IndexPath</code> (su número de fila y de sección) y tiene como <em>delegate</em> al controller de la pantalla.</p>
<p>Para avisar al controller de que se ha pulsado sobre "Añadir" se llama al <strong>método <code>platoAñadido</code>. Aquí tienes que obtener la entidad <code>Plato</code> elegida (la que está en la fila y sección seleccionadas)</strong> para que el código restante (ya implementado) se lo pase al controller de la pantalla siguiente.</p>
<h2 id="el-pedido-actual-pedidoactualviewcontroller-3-puntos">El pedido actual (<code>PedidoActualViewController</code>) (3 puntos)<a class="headerlink" href="#el-pedido-actual-pedidoactualviewcontroller-3-puntos" title="Permanent link">&para;</a></h2>
<p><strong>A partir de aquí necesitarás tener también las entidades <code>Pedido</code> y <code>LineaPedido</code>. Recuerda también añadir la relación <code>lineasPedido</code> a la entidad plato (puedes ver el modelo completo en el apéndice)</strong></p>
<p>Esta parte de la <em>app</em> muestra los datos del pedido actual, añade los platos seleccionados al pedido y permite hacer el pedido o cancelarlo.</p>
<p>El <em>controller</em> recibe el plato elegido desde el controller anterior en la propiedad <code>platoElegido</code>, hay que añadir una entidad <code>LineaPedido</code> que vincule este plato con el pedido actual.</p>
<p>El pedido actual no se puede guardar en el propio <em>controller</em> ya que por la navegación entre pantallas este se destruiría al salir de ella. Por eso se debe guardar aparte, en la variable <code>pedidoActual</code> del <em>singleton</em> <code>StateSingleton.shared</code>. <strong>Esta variable estaba comentada para que no diera error</strong> ya que hasta ahora no existía la entidad <code>Pedido</code>, <strong>descoméntala</strong>. </p>
<h3 id="anadir-el-plato-elegido-al-pedido">Añadir el plato elegido al pedido<a class="headerlink" href="#anadir-el-plato-elegido-al-pedido" title="Permanent link">&para;</a></h3>
<p>En el <code>viewDidLoad</code> de <code>PedidoActualViewController</code> nos tenemos que ocupar de añadir el plato elegido al pedido actual</p>
<ul>
<li>Primero <strong>comprueba si ya existe un <code>Pedido</code> actual (<code>StateSingleton.shared.pedidoActual!=nil</code>), y si no existe créalo en Core Data, guárdalo en el <code>StateSingleton</code> y haz save() del contexto de persistencia</strong></li>
<li><strong>Crea un nuevo <code>LineaPedido</code></strong><ul>
<li>Asígnale cantidad 1</li>
<li>Asócialo con el plato elegido. Recuerda que el plato elegido debería estar en la propiedad <code>platoElegido</code> del controller.</li>
<li>Asócialo con el pedido. Xcode debería haber generado un método de <code>Pedido</code> llamado <code>addToLineasPedido</code> para añadir una línea de pedido a un pedido.</li>
</ul>
</li>
</ul>
<h3 id="cambiar-la-cantidad-de-un-plato">Cambiar la cantidad de un plato<a class="headerlink" href="#cambiar-la-cantidad-de-un-plato" title="Permanent link">&para;</a></h3>
<p>En esta pantalla también se puede cambiar el número de unidades que queremos pedir de un plato. </p>
<blockquote>
<p>Para simplificar solo podemos movernos entre 1 y 100, no podemos bajar las unidades a 0 y eliminar el plato</p>
</blockquote>
<p>Al igual que en la pantalla anterior se usa la idea de <em>delegate</em> para saber qué celda se está seleccionando. Las celdas son de la clase <code>LineaPedidoTableviewCell</code>, y cada vez que se pulsa en un <code>+</code> o un <code>-</code> se avisa al <em>delegate</em> (en este caso el controller), pasándole el número de la fila.</p>
<p>El método <code>cantidadCambiada</code> del controller se llamará cada vez que el usuario cambie la cantidad de un plato. <strong>Añade código que obtenga la línea de pedido correspondiente, cambie la cantidad y guarde los cambios</strong></p>
<h3 id="realizar-y-cancelar-pedido">Realizar y cancelar pedido<a class="headerlink" href="#realizar-y-cancelar-pedido" title="Permanent link">&para;</a></h3>
<p>En la pantalla tienes dos botones para realizar y cancelar el pedido. </p>
<ul>
<li>Si se pulsa a "realizar" bastará con que le asignes la fecha actual al pedido, crees un nuevo pedido en <code>StateSingleton.shared.pedidoActual</code> y muestres un mensaje al usuario indicando que "su pedido está en camino" o algo similar</li>
<li>Si se pulsa a "cancelar" deberías borrar en Core Data el pedido actual. Si la regla de borrado en cascada está puesta correctamente, al borrar un pedido deberían borrarse automáticamente todas sus líneas.</li>
</ul>
<h2 id="tu-historial-pedidosviewcontroller-hasta-4-puntos">Tu historial (<code>PedidosViewController</code>) (hasta 4 puntos)<a class="headerlink" href="#tu-historial-pedidosviewcontroller-hasta-4-puntos" title="Permanent link">&para;</a></h2>
<p>En esta pantalla se deberían mostrar todos los pedidos realizados por el usuario actual. Está en blanco y puedes crear la interfaz del modo que desees.</p>
<ul>
<li>(1 punto) Si en el <code>viewWillAppear</code> muestras los datos de todos los pedidos en la consola con <code>print</code>, solo para ver que efectivamente se han almacenado correctamente</li>
<li>(2 puntos) Si muestras en una tabla una línea con el resumen de cada pedido (fecha, total y número de platos pedidos)</li>
<li>(4 puntos) Si muestras una pantalla con el listado de pedidos y otra con los detalles de cada uno   </li>
</ul>
<h2 id="apendice-el-modelo-de-datos-completo">Apéndice: el modelo de datos completo<a class="headerlink" href="#apendice-el-modelo-de-datos-completo" title="Permanent link">&para;</a></h2>
<p>Nuestro modelo de datos debe tener tres entidades, <code>Plato</code>, <code>Pedido</code> y <code>LineaPedido</code>. Esta última es la que relaciona los platos con los pedidos,  guardando cuántas unidades de un plato se han incluido en un pedido. </p>
<p><img alt="" src="../modelo_datos.png" /></p>
<p>Cada entidad debe tener las siguientes propiedades y relaciones</p>
<ul>
<li><code>Plato</code>:<ul>
<li>Propiedades:<ul>
<li><code>nombre</code> de tipo <code>String</code></li>
<li><code>descripcion</code> de tipo <code>String</code></li>
<li><code>precio</code> de tipo <code>Double</code></li>
<li><code>tipo</code> de tipo <code>String</code></li>
</ul>
</li>
<li>Relaciones:<ul>
<li><code>lineasPedido</code>, relación "a muchos" con destino <code>LineaPedido</code>. La inversa es la relación <code>plato</code></li>
</ul>
</li>
</ul>
</li>
<li><code>Pedido</code>:<ul>
<li>Propiedades:<ul>
<li><code>direccion</code> de tipo <code>String</code></li>
<li><code>telefono</code> de tipo <code>String</code></li>
<li><code>fecha</code> de tipo <code>Date</code></li>
<li><code>total</code> de tipo `Double</li>
</ul>
</li>
<li>Relaciones:<ul>
<li><code>lineasPedido</code>, relación "a muchos" con destino <code>LineaPedido</code>. La relación <strong>debe ser ordenada</strong>, para poder mostrar las lineas de un pedido siempre en el mismo orden. La inversa es la relación <code>pedido</code>. En la regla de borrado (<code>delete rule</code>) pon <code>Cascade</code> para que al eliminar un pedido se eliminen automáticamente sus líneas.</li>
</ul>
</li>
</ul>
</li>
<li><code>LineaPedido</code>:<ul>
<li>Propiedades<ul>
<li><code>cantidad</code> de tipo <code>Integer 16</code></li>
</ul>
</li>
<li>Relaciones<ul>
<li><code>pedido</code>, relación "a uno" con destino <code>Pedido</code>. La inversa es la relación <code>lineasPedido</code></li>
<li><code>plato</code>, relación "a uno" con destino <code>Plato</code>. La inversa es la relación <code>lineasPedido</code></li>
</ul>
</li>
</ul>
</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../cap9/4_ejercicios/" title="Ejercicios" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Anterior
                </span>
                Ejercicios
              </span>
            </div>
          </a>
        
        
          <a href="../../cap11/1_introduccion_BAAS/" title="Backend as a Service" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Siguiente
                </span>
                Backend as a Service
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>